<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Meny & Forhåndsbestilling</title>
    <style>
        :root {
            --primary-color: #ff80bf;
            --dark-text: #333;
            --white: #ffffff;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f9f9f9; color: var(--dark-text); margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: var(--white); padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: var(--dark-text); font-size: 24px; }
        
        .guest-selector { margin-bottom: 25px; padding: 15px; background: #fff0f6; border-radius: 10px; text-align: center; border: 1px solid var(--primary-color); }
        .guest-selector label { display: block; margin-bottom: 10px; font-weight: bold; }
        input[type="number"] { width: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 18px; text-align: center; }

        .tabs { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; scrollbar-width: none; }
        .tabs::-webkit-scrollbar { display: none; }
        .tab-btn { padding: 12px 24px; border: none; background: #f0f0f0; border-radius: 25px; cursor: pointer; white-space: nowrap; transition: 0.3s; font-weight: 500; }
        .tab-btn.active { background: var(--primary-color); color: white; font-weight: bold; }

        .menu-section { display: none; }
        .menu-section.active { display: block; }
        
        .menu-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .item-info { flex: 1; padding-right: 10px; }
        .item-name { font-weight: bold; margin-bottom: 4px; font-size: 17px; }
        .item-desc { font-size: 0.9em; color: #666; line-height: 1.3; }
        .item-price { font-weight: bold; color: var(--primary-color); margin-top: 5px; }

        .item-controls { display: flex; align-items: center; gap: 12px; }
        .qty-btn { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--primary-color); background: white; cursor: pointer; color: var(--primary-color); font-weight: bold; font-size: 20px; display: flex; align-items: center; justify-content: center; }
        .qty-btn:disabled { border-color: #ccc; color: #ccc; cursor: not-allowed; }
        .item-qty { min-width: 25px; text-align: center; font-weight: bold; font-size: 18px; }

        .footer { margin-top: 30px; padding: 20px; background: #fff; border-top: 2px solid var(--primary-color); position: sticky; bottom: 0; }
        .total { font-size: 1.3em; font-weight: bold; text-align: right; margin-bottom: 15px; }
        .order-btn { width: 100%; padding: 18px; border: none; border-radius: 12px; background: #2ecc71; color: white; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3); }
        .order-btn:hover { background: #27ae60; }
        .order-btn:disabled { background: #ccc; box-shadow: none; cursor: not-allowed; }
    </style>
</head>
<body>

<div class="container">
    <h1>Velkommen til oss!</h1>

    <div class="guest-selector">
        <label for="guests">Hvor mange personer? </label>
        <input type="number" id="guests" value="1" min="1" max="50">
    </div>

    <div class="tabs" id="tabContainer"></div>

    <div id="menuContainer"></div>

    <div class="footer">
        <div class="total">Totalt: <span id="totalPrice">0</span> kr</div>
        <button class="order-btn" id="submitOrder" onclick="sendOrder()">Send bestilling</button>
    </div>
</div>

<script>
       const GOOGLE_SCRIPT_URL = 'ВАША_ССЫЛКА_ИЗ_APPS_SCRIPT';
    
    
    const menuData = {
        "Dagens": [
            { id: "dagens_1", name: "Dagens", desc: "Dagens utvalgte rett", price: "$$$" }
        ],
        "Lunsj": [
            { id: "l1", name: "Cæsarsalat", desc: "Salat, husets cæsardressing, kylling, tomat, egg, bacon, parmesan, brød", price: 185 },
            { id: "l2", name: "Husets Burger", desc: "Briochebrød, heimelaga burger, husets dressing, pommes", price: 275 },
            { id: "l3", name: "Kyllingsandwich", desc: "Ciabatta, kylling, salat, fetaostdressing, pommes", price: 220 },
            { id: "l4", name: "Ciabatta med ost og skinke", desc: "Nysteikt ciabatta, ost, skinke, salat, smør", price: 100 },
            { id: "l5", name: "Ciabatta røykelaks og eggerøre", desc: "Nysteikt ciabatta, røykelaks, eggerøre, salat", price: 120 }
        ],
        "Pizza": [
            { id: "p1", name: "Margarita", desc: "Heimelaga italiensk bunn, rød saus, ost", price: 150 },
            { id: "p2", name: "Silliana", desc: "Rød saus, Silliana salami, ost", price: 170 },
            { id: "p3", name: "Cæsar", desc: "Kvit saus, kylling, tomat, bacon, ost", price: 180 },
            { id: "p4", name: "Nduja", desc: "Nduja (chillipølse), rød saus, løk, kjøttdeig, ost", price: 180 },
            { id: "p5", name: "Pesto-pizza", desc: "Fetaost, oliven, crispi-salat, pesto, ost", price: 170 },
            { id: "p6", name: "Hangoveren", desc: "Pepperoni, kjøttdeig, fries, kvitløksdressing, ost", price: 190 }
        ],
        "Pasta": [
            { id: "pa1", name: "Carbonara", desc: "Pasta, fløte, bacon, egg, parmesan", price: 165 },
            { id: "pa2", name: "Nduja-pasta", desc: "Nduja, pasta, kvitløk, løk, parmensan", price: 175 },
            { id: "pa3", name: "Kyllingpasta", desc: "Pesto, fløte, grillet kylling, parmesan", price: 170 },
            { id: "pa4", name: "Bolognese", desc: "Kjøttdeig, rød saus, løk, kvitløk, parmesan", price: 170 },
            { id: "pa5", name: "Pasta Pesto", desc: "Pesto, pasta, feta, rødløk, cherrytomat", price: 165 }
        ],
        "Dessert & Barn": [
            { id: "d1", name: "Gulrotkake", desc: "Husets gulrotkake med topping", price: 85 },
            { id: "d2", name: "Lun Brownies", desc: "Med salt karamell saus og vaniljeis", price: 85 },
            { id: "d3", name: "Affogato", desc: "Vaniljeis, cognackrem, espressoshot", price: 65 },
            { id: "b1", name: "Barnemeny Minipizza", desc: "Ost og skinke", price: 99 },
            { id: "b2", name: "Barnemeny Burger", desc: "Med fries", price: 99 }
        ]
    };

    let cart = {};

    function initMenu() {
        const tabContainer = document.getElementById('tabContainer');
        const menuContainer = document.getElementById('menuContainer');

        Object.keys(menuData).forEach((category, index) => {
            const btn = document.createElement('button');
            btn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
            btn.innerText = category;
            btn.onclick = () => switchTab(category, btn);
            tabContainer.appendChild(btn);

            const section = document.createElement('div');
            section.id = `cat-${category}`;
            section.className = `menu-section ${index === 0 ? 'active' : ''}`;

            menuData[category].forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'menu-item';
                itemEl.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-desc">${item.desc}</div>
                        <div class="item-price">${item.price === "$$$" ? "Pris på forespørsel" : item.price + " kr"}</div>
                    </div>
                    <div class="item-controls">
                        <button class="qty-btn" onclick="updateQty('${item.id}', -1, ${item.price === "$$$" ? 0 : item.price}, '${item.name}')" id="minus-${item.id}" disabled>−</button>
                        <span class="item-qty" id="qty-${item.id}">0</span>
                        <button class="qty-btn" onclick="updateQty('${item.id}', 1, ${item.price === "$$$" ? 0 : item.price}, '${item.name}')">+</button>
                    </div>
                `;
                section.appendChild(itemEl);
            });
            menuContainer.appendChild(section);
        });
    }

    function switchTab(category, btn) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.menu-section').forEach(s => s.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(`cat-${category}`).classList.add('active');
    }

    function updateQty(id, delta, price, name) {
        if (!cart[id]) cart[id] = { qty: 0, price: price, name: name };
        cart[id].qty += delta;
        if (cart[id].qty < 0) cart[id].qty = 0;
        
        document.getElementById(`minus-${id}`).disabled = cart[id].qty === 0;
        document.getElementById(`qty-${id}`).innerText = cart[id].qty;
        calculateTotal();
    }

    function calculateTotal() {
        let total = 0;
        for (let id in cart) { total += cart[id].qty * cart[id].price; }
        document.getElementById('totalPrice').innerText = total;
    }

    async function sendOrder() {
        const guests = document.getElementById('guests').value;
        const btn = document.getElementById('submitOrder');
        let orderSummary = "";
        
        for (let id in cart) {
            if (cart[id].qty > 0) orderSummary += `${cart[id].name} (${cart[id].qty}), `;
        }

        if (!orderSummary) {
            alert("Vennligst velg minst én vare før du bestiller.");
            return;
        }

        btn.disabled = true;
        btn.innerText = "Sender...";

        const data = {
            name: "Bestilling via nettside",
            phone: `Antall personer: ${guests}`,
            order: orderSummary.slice(0, -2),
            totalPrice: document.getElementById('totalPrice').innerText
        };

        try {
            await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(data)
            });
            alert("Tusen takk! Bestillingen din er mottatt.");
            location.reload(); 
        } catch (e) {
            alert("Noe gikk galt. Prøv igjen.");
            btn.disabled = false;
            btn.innerText = "Send bestilling";
        }
    }

    initMenu();
</script>

</body>
</html>